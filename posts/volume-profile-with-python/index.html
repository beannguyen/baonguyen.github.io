<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Volume Profile and Value Area in trading - Bao Nguyen - Algorithm Trading</title><meta name=Description content="Welcome to my blog, where I delve into the exciting world of coding and algorithmic trading. Follow me as I explore the latest advancements in these dynamic fields."><meta property="og:title" content="Volume Profile and Value Area in trading"><meta property="og:description" content="Volume profile is a technical analysis tool used in trading to help traders understand market activity and price action. It is essentially a way of visualizing the volume of trades that occur at different price levels for a specific stock, currency, or commodity. By analyzing volume profile, traders can gain insights into market sentiment, support and resistance levels, and the overall supply and demand for a given asset.
In this post, we will explore:"><meta property="og:type" content="article"><meta property="og:url" content="https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/"><meta property="og:image" content="https://beannguyen.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-15T21:27:58+07:00"><meta property="article:modified_time" content="2023-01-15T21:27:58+07:00"><meta property="og:site_name" content="Bao Nguyen - Algorithm Trading"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://beannguyen.github.io/logo.png"><meta name=twitter:title content="Volume Profile and Value Area in trading"><meta name=twitter:description content="Volume profile is a technical analysis tool used in trading to help traders understand market activity and price action. It is essentially a way of visualizing the volume of trades that occur at different price levels for a specific stock, currency, or commodity. By analyzing volume profile, traders can gain insights into market sentiment, support and resistance levels, and the overall supply and demand for a given asset.
In this post, we will explore:"><meta name=application-name content="Bao Nguyen - Algorithm Trading"><meta name=apple-mobile-web-app-title content="Bao Nguyen - Algorithm Trading"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/><link rel=next href=https://beannguyen.github.io/baonguyen.github.io/posts/value-area-trading-strategy/><link rel=stylesheet href=/baonguyen.github.io/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Volume Profile and Value Area in trading","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/beannguyen.github.io\/baonguyen.github.io\/posts\/volume-profile-with-python\/"},"genre":"posts","wordcount":1167,"url":"https:\/\/beannguyen.github.io\/baonguyen.github.io\/posts\/volume-profile-with-python\/","datePublished":"2023-01-15T21:27:58+07:00","dateModified":"2023-01-15T21:27:58+07:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Bao Nguyen"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/baonguyen.github.io/ title="Bao Nguyen - Algorithm Trading">Bao Nguyen - Algorithm Trading</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/baonguyen.github.io/posts/>Posts </a><a class=menu-item href=/baonguyen.github.io/tags/>Tags </a><a class=menu-item href=/baonguyen.github.io/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/baonguyen.github.io/ title="Bao Nguyen - Algorithm Trading">Bao Nguyen - Algorithm Trading</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/baonguyen.github.io/posts/ title>Posts</a><a class=menu-item href=/baonguyen.github.io/tags/ title>Tags</a><a class=menu-item href=/baonguyen.github.io/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Volume Profile and Value Area in trading</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/baonguyen.github.io/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Bao Nguyen</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=15159-01-15>15159-01-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1167 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#volume-profile>Volume Profile</a></li><li><a href=#value-area>Value Area</a><ul><li></li></ul></li><li><a href=#conclustion>Conclustion</a></li></ul></nav></div></div><div class=content id=content><p>Volume profile is a technical analysis tool used in trading to help traders understand market activity and price action. It is essentially a way of visualizing the volume of trades that occur at different price levels for a specific stock, currency, or commodity. By analyzing volume profile, traders can gain insights into market sentiment, support and resistance levels, and the overall supply and demand for a given asset.</p><p>In this post, we will explore:</p><ol><li>The implementation of volume profile</li><li>Utilizing volume profile to identify the value area.</li></ol><br><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pandas_datareader <span style=color:#f92672>import</span> data <span style=color:#66d9ef>as</span> dreader
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> yfinance <span style=color:#66d9ef>as</span> yf</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>symbol <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;MSFT&#39;</span>
</span></span><span style=display:flex><span>start_time <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>datetime(<span style=color:#ae81ff>2015</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span>)<span style=color:#f92672>.</span>date()<span style=color:#f92672>.</span>isoformat()
</span></span><span style=display:flex><span>end_time <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>date()<span style=color:#f92672>.</span>isoformat()</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>ticker <span style=color:#f92672>=</span> yf<span style=color:#f92672>.</span>Ticker(symbol)
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> ticker<span style=color:#f92672>.</span>history(start<span style=color:#f92672>=</span>start_time, end<span style=color:#f92672>=</span>end_time)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>head()</span></span></code></pre></div><br><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Dividends</th><th>Stock Splits</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2015-09-01 00:00:00-04:00</th><td>37.554181</td><td>37.928211</td><td>37.100006</td><td>37.242493</td><td>49688900</td><td>0.0</td><td>0.0</td></tr><tr><th>2015-09-02 00:00:00-04:00</th><td>37.723402</td><td>38.631756</td><td>37.295942</td><td>38.613945</td><td>37671500</td><td>0.0</td><td>0.0</td></tr><tr><th>2015-09-03 00:00:00-04:00</th><td>38.658460</td><td>39.166069</td><td>38.542689</td><td>38.738609</td><td>28285200</td><td>0.0</td><td>0.0</td></tr><tr><th>2015-09-04 00:00:00-04:00</th><td>38.124143</td><td>38.328967</td><td>37.580911</td><td>37.946033</td><td>37138800</td><td>0.0</td><td>0.0</td></tr><tr><th>2015-09-08 00:00:00-04:00</th><td>38.560509</td><td>39.183890</td><td>38.471456</td><td>39.085930</td><td>32469800</td><td>0.0</td><td>0.0</td></tr></tbody></table></div><br><h2 id=volume-profile>Volume Profile</h2><p>This code creates a market profile by dividing the price range of the market into equal intervals, calculating the number of trades that occur within each interval, and plotting the results as a histogram. The resulting chart provides a visual representation of the distribution of trading activity across different price levels, making it easier to understand market activity and make informed trading decisions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_volume_profile</span>(dataframe):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Calculate the range of prices</span>
</span></span><span style=display:flex><span>    price_range <span style=color:#f92672>=</span> dataframe[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>max() <span style=color:#f92672>-</span> dataframe[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>min()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Divide the price range into 100 equal intervals</span>
</span></span><span style=display:flex><span>    intervals <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>    price_intervals <span style=color:#f92672>=</span> price_range <span style=color:#f92672>/</span> intervals
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Create a list of price interval boundaries</span>
</span></span><span style=display:flex><span>    price_boundaries <span style=color:#f92672>=</span> [dataframe[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>min() <span style=color:#f92672>+</span> (price_intervals <span style=color:#f92672>*</span> i) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(intervals)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Create a dictionary to store the time and trade volume for each price interval</span>
</span></span><span style=display:flex><span>    volume_profile <span style=color:#f92672>=</span> {price: <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>for</span> price <span style=color:#f92672>in</span> price_boundaries}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Iterate over each row in the DataFrame</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> index, row <span style=color:#f92672>in</span> dataframe<span style=color:#f92672>.</span>iterrows():
</span></span><span style=display:flex><span>        <span style=color:#75715e># Determine which price interval the trade belongs to</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i, price <span style=color:#f92672>in</span> enumerate(price_boundaries):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> row[<span style=color:#e6db74>&#39;Close&#39;</span>] <span style=color:#f92672>&lt;</span> price:
</span></span><span style=display:flex><span>                volume_profile[price_boundaries[i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]] <span style=color:#f92672>+=</span> row[<span style=color:#e6db74>&#39;Volume&#39;</span>]
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> volume_profile, price_intervals
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Call the volume_profile function</span>
</span></span><span style=display:flex><span>volume_profile, price_intervals <span style=color:#f92672>=</span> calculate_volume_profile(df)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>20</span>), dpi<span style=color:#f92672>=</span> <span style=color:#ae81ff>120</span>, facecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>, edgecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>321</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>plot(df<span style=color:#f92672>.</span>index, df<span style=color:#f92672>.</span>Close)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Date&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Plot the market profile data as a histogram</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>322</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>barh(list(volume_profile<span style=color:#f92672>.</span>keys()), list(volume_profile<span style=color:#f92672>.</span>values()), height<span style=color:#f92672>=</span>price_intervals)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Volume profile&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()</span></span></code></pre></div><figure><img src=/volume-profile-post/output_6_0.png><figcaption><h4>Figure 1</h4></figcaption></figure><p>The volume profile chart has been generated, but the example is not practically useful as it utilizes all historical data from 2015 to present.
Let&rsquo;s create a monthly volume profile instead.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>plot_volume_profile</span>(df, volume_profile, price_intervals):
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>20</span>), dpi<span style=color:#f92672>=</span> <span style=color:#ae81ff>120</span>, facecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>, edgecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>321</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>plot(df<span style=color:#f92672>.</span>index, df<span style=color:#f92672>.</span>Close)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Date&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Plot the market profile data as a histogram</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>322</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>barh(list(volume_profile<span style=color:#f92672>.</span>keys()), list(volume_profile<span style=color:#f92672>.</span>values()), height<span style=color:#f92672>=</span>price_intervals)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Volume profile&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>show()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>month_df <span style=color:#f92672>=</span> df[(df<span style=color:#f92672>.</span>index <span style=color:#f92672>&gt;=</span> <span style=color:#e6db74>&#39;2022-01-01&#39;</span>) <span style=color:#f92672>&amp;</span> (df<span style=color:#f92672>.</span>index <span style=color:#f92672>&lt;=</span> <span style=color:#e6db74>&#39;2022-01-31&#39;</span>)]<span style=color:#f92672>.</span>copy()
</span></span><span style=display:flex><span>volume_profile, price_intervals <span style=color:#f92672>=</span> calculate_volume_profile(month_df)
</span></span><span style=display:flex><span>plot_volume_profile(month_df, volume_profile, price_intervals)</span></span></code></pre></div><figure><img src=/volume-profile-post/output_8_0.png><figcaption><h4>Figure 2</h4></figcaption></figure><p>As we can observe, there is the most trading activity between the prices of 235 and 250. When the price drops or rises below or above these levels, it tends to return to this range. This can be referred to as the value area.</p><h2 id=value-area>Value Area</h2><p>The value area is calculated as the range of prices where 70% of the total trading volume took place. This information is used to identify key levels of support and resistance, as well as potential areas for buying and selling. The value area is a commonly used strategy in futures markets, but it can also be applied to other markets, such as the stock and forex markets.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Calculate the value area as the range of prices with the highest trading volume</span>
</span></span><span style=display:flex><span>max_volume <span style=color:#f92672>=</span> max(volume_profile<span style=color:#f92672>.</span>values()) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.7</span>
</span></span><span style=display:flex><span>value_area <span style=color:#f92672>=</span> [price <span style=color:#66d9ef>for</span> price <span style=color:#f92672>in</span> volume_profile <span style=color:#66d9ef>if</span> volume_profile[price] <span style=color:#f92672>&gt;=</span> max_volume]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;The value area is between&#34;</span>, max(value_area), <span style=color:#e6db74>&#34;and&#34;</span>, max(value_area))</span></span></code></pre></div><pre><code>The value area is between 293.6030807495117 and 293.6030807495117
</code></pre><p>Let&rsquo;s plot the value area to see if we can gain any useful insights.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>20</span>), dpi<span style=color:#f92672>=</span> <span style=color:#ae81ff>120</span>, facecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>, edgecolor<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>321</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>plot(month_df<span style=color:#f92672>.</span>index, month_df<span style=color:#f92672>.</span>Close)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>axhline(max(value_area), color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red&#39;</span>, linestyle<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;dashed&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Date&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Plot the market profile data as a histogram</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>322</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>barh(list(volume_profile<span style=color:#f92672>.</span>keys()), list(volume_profile<span style=color:#f92672>.</span>values()), height<span style=color:#f92672>=</span>price_intervals)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;Volume profile&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;Close&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()</span></span></code></pre></div><figure><img src=/volume-profile-post/output_13_0.png><figcaption><h4>Figure 3</h4></figcaption></figure><p>In January 2022, we noticed that the price dropped below the value area before rebounding. This suggests that the market recognizes the value area as a strong support level.</p><h4 id=using-value-area-to-generate-trading-signals>Using Value Area to Generate Trading Signals</h4><p>The value area can be used to generate trading signals in several ways. Here are some of the most common strategies:</p><ol><li>Buying at Support:</li></ol><ul><li>If the price falls to the bottom of the value area, it may indicate that demand is stronger at that level and that the price may bounce back up.</li><li>Traders can use this as an opportunity to buy.</li></ul><ol start=2><li>Selling at Resistance:</li></ol><ul><li>If the price rises to the top of the value area, it may indicate that supply is stronger at that level and that the price may pull back down.</li><li>Traders can use this as an opportunity to sell.</li></ul><ol start=3><li>Breakouts:</li></ol><ul><li>If the price breaks through the top or bottom of the value area, it may indicate a change in market sentiment and that the price is likely to continue moving in the direction of the breakout.</li><li>Traders can use this as a signal to enter a trade in the direction of the breakout.</li></ul><ol start=4><li>Reversals:</li></ol><ul><li>If the price returns to the value area after breaking out, it may indicate that the initial move was a false breakout and that the price is likely to reverse.</li><li>Traders can use this as a signal to enter a trade in the opposite direction.</li></ul><p><em>It is important to note that while the value area can provide valuable information about market behavior, it should not be used in isolation to generate trading signals. It should be combined with other technical indicators and market analysis to form a complete trading strategy.</em></p><h2 id=conclustion>Conclustion</h2><p>Volume profile and value area are important tools for traders to understand market behavior and identify potential opportunities. Volume profile provides a visual representation of trading activity, while value area is determined by calculating the range of prices where 70% of the total trading volume occurred. By combining the information from both volume profile and value area, traders can identify key levels of support and resistance, as well as potential areas for buying and selling.</p><p>There are several strategies that traders can use to generate trading signals based on the value area, including buying at support, selling at resistance, breakouts, and reversals. However, it is important to note that the value area should not be used in isolation to generate trading signals. Instead, it should be combined with other technical indicators and market analysis to form a complete trading strategy.</p><p>In conclusion, volume profile and value area provide traders with valuable insights into market behavior, and can be used to create a comprehensive trading strategy. To be successful, traders need to understand the dynamics of these tools and incorporate them into their analysis and decision-making process.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 15159-01-15</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/ data-title="Volume Profile and Value Area in trading"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/ data-title="Volume Profile and Value Area in trading"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/ data-title="Volume Profile and Value Area in trading"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://beannguyen.github.io/baonguyen.github.io/posts/volume-profile-with-python/ data-title="Volume Profile and Value Area in trading"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/baonguyen.github.io/>Home</a></span></section></div><div class=post-nav><a href=/baonguyen.github.io/posts/value-area-trading-strategy/ class=next rel=next title="Value Area Trading Strategy">Value Area Trading Strategy<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.110.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/baonguyen.github.io/ target=_blank>Bao Nguyen</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},search:{highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30}}</script><script type=text/javascript src=/baonguyen.github.io/js/theme.min.js></script></body></html>